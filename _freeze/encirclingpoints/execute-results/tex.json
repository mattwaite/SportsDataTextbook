{
  "hash": "be3764afc1f221c8995a6e4dd1232a43",
  "result": {
    "markdown": "# Encircling points on a scatterplot\n\nOne thing we've talked about all semester is drawing attention to the thing you want to draw attention to. We've used color and labels to do that so far. Let's add another layer to it -- a shape around the points you want to highlight. \n\nRemember: The point of all of this is to draw the eye to what you are trying to show your reader. You want people to see the story you are trying to tell. \n\nIt's not hard to draw a shape in ggplot -- it is a challenge to put it in the right place. But, there is a library to the rescue that makes this super easy -- `ggalt`. \n\nInstall it in the console with `install.packages(\"ggalt\")`\n\nThere's a bunch of things that `ggalt` does, but one of the most useful for us is the function `encircle`. Let's dive in.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggalt)\n```\n:::\n\n\n\nLet's say we want to highlight the top scorers in college basketball. So let's use our player data.\n\n\n\n<pre><p><strong>For this walkthrough:</strong></p><p><a href=\"http://mattwaite.github.io/sportsdatafiles/players20.csv\">\n  <button class=\"btn btn-danger\"><i class=\"fa fa-save\"></i> Download csv file</button>\n</a></p></pre>\n\n\n\nAnd while we're loading it, let's filter out anyone who hasn't played. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplayers <- read_csv(\"data/players20.csv\") |> filter(MP > 0)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 5452 Columns: 57\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr  (8): Team, Player, Class, Pos, Height, Hometown, High School, Summary\ndbl (49): #, Weight, Rk.x, G, GS, MP, FG, FGA, FG%, 2P, 2PA, 2P%, 3P, 3PA, 3...\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n\nWe've done this before, but let's make a standard scatterplot of minutes and points. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + geom_point(data=players, aes(x=MP, y=PTS))\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nSo we can see right away that there are some dots at the very top that we'd want to highlight. Who are these scoring machines? \n\nLike we have done in the past, let's make a dataframe of top scorers. We'll set the cutoff at 650 points in a season. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntopscorers <- players |> filter(PTS > 650)\n```\n:::\n\n\n\nAnd like we've done in the past, we can add it to the chart with another geom_point. We'll make all the players grey, we'll make all the top scorers black.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_point(data=players, aes(x=MP, y=PTS), color=\"grey\") +\n  geom_point(data=topscorers, aes(x=MP, y=PTS), color=\"black\")\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nAnd like that, we're on the path to something publishable. We'll need to label those dots with `ggrepel` and we'll need to drop the default grey and add some headlines and all that. And, for the most part, we've got a solid chart. \n\nBut what if we could really draw the eye to those players. Let's draw a circle around them. \nIn `ggalt`, there is a new geom called `geom_encircle`, which ... does what you think it does. It encircles all the dots in a dataset. \n\nSo let's add geom_encircle and we'll just copy the data and the aes from our topscorers geom_point. Then, we need to give the encirclement a shape using s_shape -- which is a number between 0 and 1 -- and then how far away from the dots to draw the circle using expand, which is another number between 0 and 1.\n\nLet's start with `s_shape` 1 and `expand` 1.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_point(data=players, aes(x=MP, y=PTS), color=\"grey\") + \n  geom_point(data=topscorers, aes(x=MP, y=PTS), color=\"black\") + \n  geom_encircle(data=topscorers, aes(x=MP, y=PTS), s_shape=1, expand=1, colour=\"red\")\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-7-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nWhoa. That's ... not good.\n\nLet's go the opposite direction. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_point(data=players, aes(x=MP, y=PTS), color=\"grey\") + \n  geom_point(data=topscorers, aes(x=MP, y=PTS), color=\"black\") + \n  geom_encircle(data=topscorers, aes(x=MP, y=PTS), s_shape=0, expand=0, colour=\"red\")\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-8-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nBetter, but ... the circle cuts through multiple dots. \n\nThis takes a little bit of finessing, but a shape of .5 means the line will have some bend to it -- it'll look more like someone circled it with a pen. Then, the expand is better if you use hundredths instead of tenths. So .01 instead of .1. Here's mine after fiddling with it for a bit.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_point(data=players, aes(x=MP, y=PTS), color=\"grey\") + \n  geom_point(data=topscorers, aes(x=MP, y=PTS), color=\"black\") + \n  geom_encircle(data=topscorers, aes(x=MP, y=PTS), s_shape=.5, expand=.03, colour=\"red\")\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-9-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nNow let's clean this up and make it presentable. If you look at the top scorers, only two were Wooden Award finalists. So here's what a chart telling that story might look like.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + \n  geom_point(data=players, aes(x=MP, y=PTS), color=\"grey\") + \n  geom_point(data=topscorers, aes(x=MP, y=PTS), color=\"black\") + \n  geom_encircle(data=topscorers, aes(x=MP, y=PTS), s_shape=.5, expand=.03, colour=\"red\") +\n  geom_text(aes(x=725, y=700, label=\"Top scorers\")) + \n  labs(title=\"Only two top scorers are Wooden Award candidates\", subtitle=\"Iowa's Garza and Marquette's Howard are the only two looking at postseason hardware.\", x=\"Minutes\", y=\"Points\") + \n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n## A different, more local example\n\nYou can use circling outside of the top of something. It's a bit obvious that the previous dots were top scorers. What about when they aren't at the top?\n\nWorks the same way -- use layering and color smartly and tell the story with all your tools.\n\nLet's grab the top three point attempt takers on the Nebraska roster. As of now, only one will be coming back. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnutop <- players |> filter(Team == \"Nebraska Cornhuskers\") |> top_n(3, `3PA`)\n```\n:::\n\n\n\nAnd just like above, we can plug in our players geom, our nutop dataframe into another geom, then encircle that dataframe. Slap some headlines and annotations on it and here's what we get:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + geom_point(data=players, aes(x=MP, y=`3PA`), color=\"grey\") + geom_point(data=nutop, aes(x=MP, y=`3PA`), color=\"red\") + geom_encircle(data=nutop, aes(x=MP, y=`3PA`), s_shape=.02, expand=.18, colour=\"red\") +\n  geom_text(aes(x=400, y=100, label=\"Nebraska's top three shooters\")) + \n  labs(title=\"Did Hoiberg install his system?\", subtitle=\"Nebraska's top three point shooters were nowhere near the tops in college basketball\", x=\"Minutes\", y=\"Three point attempts\") + \n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n\n::: {.cell-output-display}\n![](encirclingpoints_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\nThe dot on the far right? Cam Mack. Oh what could have been. \n",
    "supporting": [
      "encirclingpoints_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}