{
  "hash": "5a4ff1c20eef953d62c0540eff9a2b07",
  "result": {
    "markdown": "# Arranging multiple plots together\n\nSometimes you have two or three (or more) charts that by themselves aren't very exciting and are really just one chart that you need to merge together. It would be nice to be able to arrange them programmatically and not have to mess with it in Adobe Illustrator.\n\nGood news.\n\nThere is.\n\nIt's called `cowplot`, and it's pretty easy to use. First install cowplot with `install.packages(\"cowplot\")`. Then let's load tidyverse and cowplot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(cowplot)\n```\n:::\n\n\nWe'll use the college football attendance data we've used before.\n\n\n<pre><p><strong>For this walkthrough:</strong></p><p><a href=\"http://mattwaite.github.io/sportsdatafiles/attendance.csv\">\n  <button class=\"btn btn-danger\"><i class=\"fa fa-save\"></i> Download csv file</button>\n</a></p></pre>\n\n\nAnd load it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nattendance <- read_csv(\"data/attendance.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 150 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): Institution, Conference\ndbl (6): 2013, 2014, 2015, 2016, 2017, 2018\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\nMaking a quick percent change.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nattendance <- attendance |> mutate(change = ((`2018`-`2017`)/`2017`)*100)\n```\n:::\n\n\nLet's chart the top 10 and bottom 10 of college football ticket growth ... and shrinkage.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop10 <- attendance |> top_n(10, wt=change)\nbottom10 <- attendance |> top_n(10, wt=-change)\n```\n:::\n\n\nOkay, now to do this I need to **save my plots to an object**. We do this the same way we save things to a dataframe -- with the arrow. We'll make two identical bar charts, one with the top 10 and one with the bottom 10.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbar1 <- ggplot() + \n  geom_bar(data=top10, aes(x=reorder(Institution, change), weight=change)) +\n  coord_flip()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbar2 <- ggplot() + \n  geom_bar(data=bottom10, aes(x=reorder(Institution, change), weight=change)) +\n  coord_flip()\n```\n:::\n\n\nWith cowplot, we can use a function called `plot_grid` to arrange the charts:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_grid(bar1, bar2) \n```\n\n::: {.cell-output-display}\n![](cowplots_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nWe can also stack them on top of each other:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_grid(bar1, bar2, ncol=1) \n```\n\n::: {.cell-output-display}\n![](cowplots_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nTo make these publishable, we should add headlines, chatter, decent labels, credit lines, etc. But to do this, we'll have to figure out which labels go on which charts, so we can make it look decent. For example -- both charts don't need x or y labels. If you don't have a title and subtitle on both, the spacing is off, so you need to leave one blank or the other blank. You'll just have to fiddle with it until you get it looking right. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nbar1 <- ggplot() + \n  geom_bar(data=top10, aes(x=reorder(Institution, change), weight=change)) +\n  coord_flip() + \n  labs(title=\"College football winners...\", subtitle = \"Not every football program saw attendance shrink in 2018. But some really did.\",  x=\"\", y=\"Percent change\", caption = \"\") + \n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbar2 <- ggplot() + \n  geom_bar(data=bottom10, aes(x=reorder(Institution, change), weight=change)) +\n  coord_flip() +  \n  labs(title = \"... and losers\", subtitle= \"\", x=\"\", y=\"\",  caption=\"Source: NCAA | By Matt Waite\") + \n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_grid(bar1, bar2) \n```\n\n::: {.cell-output-display}\n![](cowplots_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nWhat's missing here? Color. Our eyes aren't drawn to anything (except maybe the top and bottom). So we need to help that. A bar chart without context or color to draw attention to something isn't much of a bar chart. Same with a line chart -- if your line chart has one line, no context, no color, it's going to fare poorly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncc <- bottom10 |> filter(Institution == \"Coastal Caro.\")\ngs <- top10 |> filter(Institution == \"Ga. Southern\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbar1 <- ggplot() + \n  geom_bar(data=top10, aes(x=reorder(Institution, change), weight=change)) + \n  geom_bar(data=gs, aes(x=reorder(Institution, change), weight=change), fill=\"#011E41\") + \n  coord_flip() + \n  labs(title=\"College football winners...\", subtitle = \"Not every football program saw attendance shrink in 2018. But some really did.\",  x=\"\", y=\"Percent change\", caption = \"\") +\n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbar2 <- ggplot() + \n  geom_bar(data=bottom10, aes(x=reorder(Institution, change), weight=change)) + \n  geom_bar(data=cc, aes(x=reorder(Institution, change), weight=change), fill=\"#006F71\") + \n  coord_flip() +  \n  labs(title = \"... and losers\", subtitle= \"\", x=\"\", y=\"\",  caption=\"Source: NCAA | By Matt Waite\") + \n  theme_minimal() + \n  theme(\n    plot.title = element_text(size = 16, face = \"bold\"),\n    axis.title = element_text(size = 8), \n    plot.subtitle = element_text(size=10), \n    panel.grid.minor = element_blank()\n    )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_grid(bar1, bar2) \n```\n\n::: {.cell-output-display}\n![](cowplots_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "cowplots_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}